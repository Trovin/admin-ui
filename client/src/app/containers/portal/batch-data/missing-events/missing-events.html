<div class="clearfix d-flex flex-row align-items-start mb-4">
	<h1 class="page-title m-0">Missing Events Ids</h1>

	<form
		ngNativeValidate
		(submit)="fetch()">

		<button
			type="submit"
			class="btn btn-default border-none pt-1 pb-1 ml-2"
			title="Refresh"
			[disabled]="loading">

			<i
				e2e="refresh"
				class="fa fa-refresh"
				[class.fa-spin]="loading">
			</i>
		</button>
	</form>
</div>

<div class="table-responsive relative mb-3">
	<div *ngIf="loading">
		<div
			e2e="loading-shade"
			class="bhn-loading-shade">
			<i
				e2e="loader"
				class="fa fa-pulse fa-spinner fa-2x"></i>
		</div>
	</div>

	<div *ngIf="!!s3FilesLinks.length">
		<details>
			<summary>S3 files with full missing events list</summary>
			<p *ngFor="let s3File of s3FilesLinks">
				<a [href]="s3File">{{s3File}}</a>
			</p>
		</details>
	</div>

	<table
		e2e="batch-data-missing-events-ids-table"
		class="table table-lg table-hover table-striped table-bordered m-0">

		<thead>
			<th
				*ngFor="let item of tableTitles"
				scope="col"
				class="p-2 align-middle"
				[class.d-none]="loading">

				{{item}}
			</th>
		</thead>
		<tbody>
			<tr *ngFor="let item of items; let i = index">
				<td
					*ngFor="let key of item | keys"
					class="p-2 wrap-text fixed-width">

					<small>{{item[key] | json}}</small>
				</td>
			</tr>

			<tr *ngIf="!items.length">
				<td
					e2e="no-data"
					[attr.colspan]="items.length + 1">

					No data.
				</td>
			</tr>
		</tbody>
	</table>
</div>

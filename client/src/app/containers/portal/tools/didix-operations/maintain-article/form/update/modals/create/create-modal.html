<div class="modal-header d-flex flex-row align-items-top">
	<h4 class="modal-title pull-left">{{title}}</h4>

	<button
		class="close pull-right"
		type="button"
		(click)="bsModalRef.hide()">

		<i
			class="fa"
			[ngClass]="{
					'fa-times': !submitted,
					'fa-pulse fa-spinner fa-spin': submitted
				}">
		</i>
	</button>
</div>

<div class="modal-body">
	<form
		[formGroup]="form"
		(ngSubmit)="submit()">

		<div
			*ngIf="action !== modalActions.DELETE"
			class="mb-4">

			<div class="form-group d-flex flex-column">
				<label for="article"><b>Article</b></label>

				<input
					id="article"
					type="text"
					name="article"
					placeholder="Article"
					class="form-control"
					[class.is-invalid]="form.get('article').touched && form.get('article').errors"
					formControlName="article"/>

				<form-message
					[control]="form.get('article')"
					[customErrorMessage]="'Max length 25 characters'"></form-message>
			</div>

			<div class="form-group d-flex flex-column">
				<label for="articleDesc"><b>Description</b></label>
				<input
					id="articleDesc"
					type="text"
					name="description"
					placeholder="Description"
					class="form-control"
					[attr.disabled]="submitted ? '' : null"
					[class.is-invalid]="form.get('articleDesc').touched && form.get('articleDesc').errors"
					formControlName="articleDesc"/>

				<form-message [control]="form.get('articleDesc')"></form-message>
			</div>

			<div class="form-group flex-fill mb-3">
				<label for="startDate">
					<b>Start Date</b>
				</label>

				<div class="d-flex pr-xl-2">
					<div class="form-group flex-fill m-0 p-0">
						<input
							type="text"
							id="startDate"
							class="form-control radius-none"
							[class.is-invalid]="form.get('startDate').touched && form.get('startDate').errors"
							name="date"
							placeholder="YYYY-MM-DD"
							readonly
							#bsDp="bsDatepicker"
							bsDatepicker
							triggers="keydown:click"
							[outsideClick]="true"
							formControlName="startDate"
							[bsConfig]="{useUtc: false, containerClass: 'theme-default', dateInputFormat: 'YYYY-MM-DD'}"
							(bsValueChange)="changeStartDate($event)">
					</div>

					<div class="input-group-btn m-0 p-0">
						<button
							e2e="date-range-from"
							type="button"
							class="btn btn-default border radius-none"
							(click)="bsDp.toggle()">

							<i class="fa fa-calendar"></i>
						</button>
					</div>
				</div>

				<form-message [control]="form.get('startDate')"></form-message>
			</div>

			<div class="custom-control custom-checkbox col p-0">
				<input
					id="discontinued"
					type="checkbox"
					name="discontinued"
					placeholder="Discontinued"
					class="custom-control-input"
					[attr.disabled]="submitted ? '' : null"
					[checked]="form.get('discontinued').value"
					formControlName="discontinued"
					(change)="changeDiscontinued($event.target.checked)"/>

				<label
					for="discontinued"
					class="custom-control-label">

					<b>Discontinued</b>
				</label>

				<form-message [control]="form.get('discontinued')"></form-message>
			</div>
		</div>

		<div class="text-center">
			<div class="btn-group">
				<button
					class="btn"
					type="submit"
					[disabled]="submitted"
					[ngClass]="{
						'btn-danger': action === modalActions.DELETE,
						'btn-success': action !== modalActions.DELETE
					}">

					<ng-template
						[ngIf]="action === modalActions.DELETE"
						[ngIfElse]="elseBlock">

						Delete
					</ng-template>
					<ng-template #elseBlock>
						Apply
					</ng-template>
				</button>
			</div>
		</div>
	</form>
</div>

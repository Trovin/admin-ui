<div class="modal-header d-flex flex-row align-items-top">
	<h4 class="modal-title pull-left">{{title}}</h4>

	<button
		class="close pull-right"
		type="button"
		(click)="closeModal()">

		<i
			class="fa"
			[ngClass]="{
					'fa-times': !submitted,
					'fa-pulse fa-spinner fa-spin': submitted
				}">
		</i>
	</button>
</div>

<div class="modal-body">
	<form
		[formGroup]="form"
		(ngSubmit)="submit()">

		<div class="mb-4">
			<div class="form-group d-flex flex-column">
				<label for="storeId"><b>Store</b></label>

				<input
					id="storeId"
					type="text"
					name="storeId"
					placeholder="Store"
					class="form-control"
					[attr.disabled]="submitted || action === modalActions.UPDATE ? '' : null"
					[class.is-invalid]="form.get('storeId').touched && form.get('storeId').errors"
					formControlName="storeId"/>

				<form-message
					[control]="form.get('storeId')"
					[customErrorMessage]="'Max length 50 characters'">
				</form-message>
			</div>
			<div class="form-group d-flex flex-column">
				<label for="storeDesc"><b>Description</b></label>

				<input
					id="storeDesc"
					type="text"
					name="storeDesc"
					placeholder="Description"
					class="form-control"
					[attr.disabled]="submitted ? '': null"
					[class.is-invalid]="form.get('storeDesc').touched && form.get('storeDesc').errors"
					formControlName="storeDesc"/>

				<form-message [control]="form.get('storeDesc')"></form-message>
			</div>

			<div class="form-group d-flex flex-column">
				<label for="city"><b>City</b></label>
				<input
					id="city"
					type="text"
					name="city"
					placeholder="City"
					class="form-control"
					[attr.disabled]="submitted ? '': null"
					[class.is-invalid]="form.get('city').touched && form.get('city').errors"
					formControlName="city"/>

				<form-message [control]="form.get('city')"></form-message>
			</div>

			<div class="mb-3">
				<div class="form-group mb-3">
					<label class="w-100">
						<b>Sales channel</b>

						<dropdown-item-picker
							e2e="sales-years-type-dropdown"
							#channelsList
							class="block w-100"
							placeholder="Select channel"
							[fixedWidth]="false"
							[disabled]="submitted"
							[loading]="loadingChannels"
							[class.is-invalid]="form.get('channel').touched && form.get('channel').errors"
							[dataObservable]="channelsSubj"
							(paramsChanged)="changedChannel($event[0].value)">
						</dropdown-item-picker>
					</label>

					<form-message [control]="form.get('channel')"></form-message>
				</div>
			</div>

			<div class="form-group d-flex flex-column">
				<label for="b2b"><b>B2B</b></label>
				<input
					id="b2b"
					type="text"
					name="b2b"
					placeholder="Y or N"
					class="form-control"
					[attr.disabled]="submitted ? '': null"
					[class.is-invalid]="form.get('b2b').touched && form.get('b2b').errors"
					formControlName="b2b"/>

				<form-message
					[control]="form.get('b2b')"
					[customErrorMessage]="'Invalid text. Put in Y or N'">
				</form-message>
			</div>

			<div class="form-group d-flex flex-column">
				<label for="countryId"><b>Country</b></label>
				<input
					id="countryId"
					type="text"
					name="countryId"
					placeholder="Country"
					class="form-control"
					[attr.disabled]="submitted ? '': null"
					[class.is-invalid]="form.get('countryId').touched && form.get('countryId').errors"
					formControlName="countryId"/>

				<form-message
					[control]="form.get('countryId')"
					[customErrorMessage]="'Max length 2 characters'"></form-message>
			</div>

			<div class="form-group d-flex flex-column">
				<label for="postalCode"><b>Postcode</b></label>
				<input
					id="postalCode"
					type="text"
					name="postalCode"
					placeholder="Postcode"
					class="form-control"
					[attr.disabled]="submitted ? '': null"
					[class.is-invalid]="form.get('postalCode').touched && form.get('postalCode').errors"
					formControlName="postalCode"/>

				<form-message
					[control]="form.get('postalCode')"
					[customErrorMessage]="'Max length 25 characters'"></form-message>
			</div>
		</div>

		<div class="text-center">
			<div class="btn-group">
				<button
					class="btn btn-success"
					type="submit"
					[disabled]="submitted">

					Apply
				</button>
				<button
					type="button"
					class="btn btn-danger"
					(click)="decline()">

					Cancel
				</button>
			</div>
		</div>
	</form>
</div>

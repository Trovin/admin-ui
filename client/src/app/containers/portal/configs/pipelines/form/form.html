<div
	e2e="pipelines-actions-section"
	class="row mb-3">
	<div class="col-xs-12 col-lg-5">
		<div class="input-group">
			<input
				e2e="search"
				id="search"
				type="search"
				class="form-control radius-none"
				placeholder="Search..."
				[disabled]="loading"
				[(ngModel)]="params.search"
				(keyup.enter)="submit()"/>

			<button
				e2e="search-button"
				type="button"
				class="btn btn-secondary btn-search radius-none"
				[disabled]="!this.params.search || loading"
				(click)="submit()">

				<i class="fa fa-search"></i>
			</button>
		</div>
	</div>

	<div class="col-xs-12 col-lg-7 mt-3 mt-lg-0 d-flex justify-content-end">
		<div class="in-process-bar d-flex align-items-center mr-4">
			<div
				*ngIf="actionsLists.executeList.length"
				class="preloader text-success d-flex align-items-center justify-content-center ml-3">

				<i class="icon fa fa-play-circle fa-lg"></i>
				<sub><span class="badge badge-pill badge-light">{{actionsLists.executeList.length}}</span></sub>
			</div>

			<div
				*ngIf="actionsLists.uploadList.length || isCheckingOnExistFiles"
				class="preloader text-warning d-flex align-items-center justify-content-center ml-3">

				<i class="icon fa fa-upload fa-lg"></i>
				<sub>
					<span
						*ngIf="actionsLists.uploadList.length"
						class="badge badge-pill badge-light">
							{{actionsLists.uploadList.length}}
					</span>
				</sub>
			</div>

			<div
				*ngIf="actionsLists.downloadList.length"
				class="preloader text-primary d-flex align-items-center justify-content-center ml-3">

				<i class="icon fa fa-download fa-lg"></i>
				<sub><span class="badge badge-pill badge-light">{{actionsLists.downloadList.length}}</span></sub>
			</div>
		</div>

		<div class="d-flex">
			<label
				*permissions="{ container: containers.PIPELINES_CONFIGS, permissions: [permission.CREATE] }"
				class="btn btn-success cursor-pointer btn-sm d-flex align-items-center mr-2">
				<i
					e2e="add-new"
					class="fa fa-plus mr-2"></i>
				Add new

				<input
					class="d-none"
					name="file"
					multiple
					type="file"
					[disabled]="loading || isCheckingOnExistFiles"
					(change)="uploadFiles($event.target)">
			</label>

			<button
				e2e="refresh"
				class="btn btn-dark btn-sm mr-2"
				type="button"
				title="Refresh"
				[disabled]="loading"
				(click)="refresh()">

				<i
					class="fa fa-refresh mr-1"
					[class.fa-spin]="loading">
				</i>

				Refresh
			</button>

			<div
				dropdown
				[isDisabled]="!actionsLists.selectedList.length || loading">

				<button
					e2e="bulk-actions"
					class="btn btn-primary"
					dropdownToggle
					type="button">

					Bulk actions
					<i class="fa fa-caret-down ml-2"></i>
				</button>
				<ul
					class="dropdown-menu dropdown-menu-right"
					*dropdownMenu
					role="menu">

					<li class="pl-4 pr-4 text-muted small bold">
						Selected: {{ actionsLists.selectedList.length }} file<span *ngIf="actionsLists.selectedList.length !== 1">s</span>
					</li>

					<li class="divider dropdown-divider"></li>

					<li
						*permissions="{ container: containers.PIPELINES_CONFIGS, permissions: [permission.UPDATE] }"
						role="menuitem">
						<button
							class="dropdown-item"
							type="button"
							(click)="executeSelectedConfigs()">

							<i class="fa fa-play-circle text-success mr-1"></i>

							Execute
						</button>
					</li>
					<li role="menuitem">
						<button
							class="dropdown-item"
							type="button"
							(click)="downloadSelectedConfigs()">

							<i class="fa fa-download text-primary mr-1"></i>

							Download (.zip)
						</button>
					</li>
				</ul>
			</div>
		</div>
	</div>
</div>
